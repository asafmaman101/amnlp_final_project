%
% File acl2020.tex
%
%% Based on the style files for ACL 2020, which were
%% Based on the style files for ACL 2018, NAACL 2018/19, which were
%% Based on the style files for ACL-2015, with some improvements
%%  taken from the NAACL-2016 style
%% Based on the style files for ACL-2014, which were, in turn,
%% based on ACL-2013, ACL-2012, ACL-2011, ACL-2010, ACL-IJCNLP-2009,
%% EACL-2009, IJCNLP-2008...
%% Based on the style files for EACL 2006 by 
%%e.agirre@ehu.es or Sergi.Balari@uab.es
%% and that of ACL 08 by Joakim Nivre and Noah Smith

\documentclass[11pt,a4paper]{article}
\usepackage[hyperref]{acl2020}
\usepackage{times}
\usepackage{latexsym}
\renewcommand{\UrlFont}{\ttfamily\small}

\usepackage{multirow}
\usepackage{booktabs}
\usepackage{graphicx}
\graphicspath{ {./figs/} }
 
% This is not strictly necessary, and may be commented out,
% but it will improve the layout of the manuscript,
% and will typically save some space.
\usepackage{microtype}

\aclfinalcopy % Uncomment this line for the final submission
%\def\aclpaperid{***} %  Enter the acl Paper ID here

%\setlength\titlebox{5cm}
% You can expand the titlebox if you need extra space
% to show all the authors. Please do not make the titlebox
% smaller than 5cm (the original size); we will check this
% in the camera-ready version and ask you to change it back.

\newcommand\BibTeX{B\textsc{ib}\TeX}

\title{Multi-Task Patterns Training for Task Generalization}

\author{Asaf Maman \\
  Blavatnik School of Computer Science, Tel Aviv University \\
  \texttt{asafmaman@mail.tau.ac.il} \\}

\date{}

\begin{document}
\maketitle
\begin{abstract}
In recent years it appeared that many NLP tasks can be solved by providing only a few task-specific examples to a pretrained model.
At first, prompting was done by conditioning the model on examples without any parameter change, later this method has been developed further by fine-tuning the model with the same inference method (e.g. PET), which appeared to outperform existing fully supervised approaches.
In this work, I would ask to investigate whether the framework of prompting via pattern-verbalizer pair (PVP) can be leveraged to multi-tasking.
That is, testing the ability of models to solve different tasks by prompting a single model with a different PVP for each task. This will put in test whether one model can solve many tasks without the need to train a separate model for each of them.
Furthermore, it would be interesting to see if training all tasks together can provide the model the ability to generalize to unseen classification tasks.
Lastly, I would like to examine whether training one model for several tasks may enhance each task's performance by forcing it to find more robust representations.
\end{abstract}


\section{Introduction}

Pre-trained language models can handle various clssification tasks using fine-tuned classification head.
One alternative way for classification is to reformulate the input examples as cloze-style phrases.
This method utilizes the language modeling capabilities and makes dicisions according to the scores attributed to each classe's specified token,
which is called \textit{verbalizer}.
Formatting the inputs into task specific pattern and choosing representative words for classes can be seen as providing task description together with the input.

Another advantage of infering classes from verbalizers is that training one language modeling head can be used for multiple tasks at once.
This facilitates more versatile use of the model but also leverages the pre-trained language modeling knowledge for the use of classification.

In this project I would like to investigate how masked language models performance are effected when trained on multiple classification tasks.
In addition, I would like to examine whether providing task description in the form of PVP can help MLMs generalize to \textit{unseen tasks}.
Finally, I will test these questions in few-shot setting using PET pipeline.

\section{Method}

\begin{figure}[ht]
	\centering
	\includegraphics[width=\linewidth]{mlm_classification}
	\caption{Normal Case: 1 Request \& 1 Response.}
	\label{normal_case}
\end{figure}


\section{Experiments}

\begin{table}[ht]
	\fontsize{7}{10}
	\selectfont
	\begin{tabular}{lcccc}
		\toprule
		& \textbf{wo/agnews} & \textbf{wo/yahoo} & \textbf{wo/yelp-full} & \textbf{wo/mnli} \\
		\hline
		\textbf{agnews}    & 78.8 \tiny$\pm$2.53        & 91.9 \tiny$\pm$0.08        & 91.9   \tiny$\pm$0.09          & 91.7 \tiny$\pm$0.10       \\
		\textbf{yahoo}     & 72.3 \tiny$\pm$0.33        & 52.2 \tiny$\pm$1.72        & 72.1   \tiny$\pm$0.13          & 72.2 \tiny$\pm$0.20       \\
		\textbf{yelp-full} & 65.5 \tiny$\pm$0.20        & 65.6 \tiny$\pm$0.25        & 33.8   \tiny$\pm$5.12          & 65.5 \tiny$\pm$0.24       \\
		\textbf{mnli}      & 85.7 \tiny$\pm$0.20        & 85.8 \tiny$\pm$0.11        & 85.7   \tiny$\pm$0.27          & 37.3 \tiny$\pm$3.27      \\
		\bottomrule
	\end{tabular}
\caption{Multi-task using logits}\label{tab:multi-use-logits-summary}
\end{table}

\begin{table*}[]
	\centering
	\fontsize{9}{13}
	\selectfont
	\begin{tabular}{lcccccccccccccccc}
		\toprule
		& \textbf{agnews}    & \textbf{yahoo}    & \textbf{yelp-full}    & \textbf{yelp-polarity}    & \textbf{mnli}    & \textbf{qpp}    & \textbf{all}    & \textbf{unsup}    \\ \hline
		\textbf{agnews}        & 93.7   \tiny$\pm$ 0.06      & 81.7   \tiny$\pm$ 1.78      & 62.6      \tiny$\pm$ 6.10      & 62.7          \tiny$\pm$ 3.62      & 57.6 \tiny$\pm$ 5.06      & 63.9 \tiny$\pm$ 4.35      & 92.6 \tiny$\pm$ 0.45      & 66.7   \tiny$\pm$ 7.55      \\
		\textbf{yahoo}         & 56.1    \tiny$\pm$ 1.88      & 74.8   \tiny$\pm$ 0.25      & 39.3       \tiny$\pm$ 5.59      & 38.1           \tiny$\pm$ 7.25      & 24.4  \tiny$\pm$ 2.25      & 34.0 \tiny$\pm$ 5.39      & 74.1 \tiny$\pm$ 0.68      & 43.2   \tiny$\pm$ 7.66      \\
		\textbf{yelp-full}     & 27.9    \tiny$\pm$ 6.25      & 32.0   \tiny$\pm$ 2.23      & 67.7       \tiny$\pm$ 0.53      & 44.3           \tiny$\pm$ 3.94      & 34.1  \tiny$\pm$ 5.23      & 35.6 \tiny$\pm$ 13.9      & 66.6 \tiny$\pm$ 1.58      & 33.5   \tiny$\pm$ 11.6      \\
		\textbf{yelp-polarity} & 61.9    \tiny$\pm$ 10.4      & 59.6   \tiny$\pm$ 8.50      & 97.7       \tiny$\pm$ 0.26      & 97.7           \tiny$\pm$ 0.05      & 75.4  \tiny$\pm$ 4.52      & 75.5 \tiny$\pm$ 22.3      & 97.3 \tiny$\pm$ 0.29      & 67.3   \tiny$\pm$ 15.7      \\
		\textbf{mnli}          & 36.0    \tiny$\pm$ 1.31      & 35.6   \tiny$\pm$ 0.42      & 39.4       \tiny$\pm$ 9.67      & 42.1           \tiny$\pm$ 8.47      & 88.4  \tiny$\pm$ 0.07      & 51.8 \tiny$\pm$ 1.95      & 75.6 \tiny$\pm$ 16.3      & 38.4   \tiny$\pm$ 4.34      \\
		\textbf{qpp}           & 44.7    \tiny$\pm$ 14.5      & 43.7   \tiny$\pm$ 12.4      & 45.7       \tiny$\pm$ 15.2      & 41.1           \tiny$\pm$ 6.71      & 77.9  \tiny$\pm$ 0.74      & 85.9 \tiny$\pm$ 0.31      & 68.2 \tiny$\pm$ 27.7      & 43.9   \tiny$\pm$ 9.57      \\ \bottomrule
	\end{tabular}
\caption{Multi-task using logits}\label{tab:single-on-train-set-summary}
\end{table*}

\section{Conclusion}

TBD


\bibliography{acl2020}
\bibliographystyle{acl_natbib}

\newpage
\appendix



\begin{table*}
	\centering
	\fontsize{8}{12}
	\selectfont
	\begin{tabular}{lllllllllllllll}
		\toprule
		\multicolumn{1}{l}{\textbf{}}       & \textbf{}  & \multicolumn{3}{c}{\textbf{wo/agnews}}                                                              & \multicolumn{3}{c}{\textbf{wo/yahoo}}                                                               & \multicolumn{3}{c}{\textbf{wo/yelp-full}}                                                           & \multicolumn{3}{c}{\textbf{wo/mnli}}                                                                & \multicolumn{1}{c}{\multirow{2}{*}{\textbf{wo/unsup}}} \\
		\multicolumn{1}{l}{\textbf{}}       & \textbf{}  & \multicolumn{1}{c}{\textbf{0}} & \multicolumn{1}{c}{\textbf{1}} & \multicolumn{1}{c}{\textbf{2}} & \multicolumn{1}{c}{\textbf{0}} & \multicolumn{1}{c}{\textbf{1}} & \multicolumn{1}{c}{\textbf{2}} & \multicolumn{1}{c}{\textbf{0}} & \multicolumn{1}{c}{\textbf{1}} & \multicolumn{1}{c}{\textbf{2}} & \multicolumn{1}{c}{\textbf{0}} & \multicolumn{1}{c}{\textbf{1}} & \multicolumn{1}{c}{\textbf{2}} & \multicolumn{1}{c}{}    \\
		\hline
		\multirow{3}{*}{\textbf{agnews}}    & \textbf{0} & 77.16                          & 79.32                          & 76.22                          & 91.94                          & 91.66                          & 91.86                          & 91.78                          & 91.80                          & 91.84                          & 91.62                          & 91.72                          & 91.68                          & 65.48                              \\
		& \textbf{1} & 80.70                          & 81.68                          & 79.74                          & 91.88                          & 92.00                          & 91.74                          & 92.00                          & 91.88                          & 91.82                          & 91.98                          & 91.76                          & 91.68                          & 74.72                              \\
		& \textbf{2} & 78.34                          & 80.14                          & 77.44                          & 91.96                          & 91.86                          & 91.84                          & 92.16                          & 92.00                          & 91.96                          & 91.94                          & 91.72                          & 91.82                          & 59.76                              \\
		\hline
		\multirow{3}{*}{\textbf{yahoo}}     & \textbf{0} & 72.60                          & 71.80                          & 71.92                          & 54.18                          & 46.40                          & 52.98                          & 72.22                          & 72.24                          & 72.02                          & 72.28                          & 71.88                          & 72.48                          & 42.22                              \\
		& \textbf{1} & 72.38                          & 71.94                          & 72.16                          & 56.38                          & 51.30                          & 54.94                          & 72.22                          & 71.98                          & 72.06                          & 72.42                          & 71.96                          & 72.26                          & 51.26                              \\
		& \textbf{2} & 70.86                          & 68.60                          & 72.28                          & 41.30                          & 31.88                          & 51.10                          & 70.70                          & 69.56                          & 72.00                          & 71.70                          & 71.44                          & 72.34                          & 36.02                              \\
		\hline
		\multirow{3}{*}{\textbf{yelp-full}} & \textbf{0} & 65.72                          & 65.00                          & 65.40                          & 65.72                          & 65.16                          & 65.50                          & 36.22                          & 37.30                          & 34.24                          & 65.82                          & 65.50                          & 65.54                          & 40.08                              \\
		& \textbf{1} & 64.50                          & 65.46                          & 64.42                          & 64.48                          & 65.84                          & 65.00                          & 36.90                          & 37.22                          & 35.34                          & 65.02                          & 65.40                          & 65.28                          & 40.34                              \\
		& \textbf{2} & 64.82                          & 64.18                          & 65.32                          & 65.18                          & 64.60                          & 65.36                          & 22.70                          & 31.20                          & 27.90                          & 61.34                          & 52.50                          & 65.40                          & 20.08                              \\
		\hline
		\multirow{3}{*}{\textbf{mnli}}      & \textbf{0} & 85.82                          & 85.54                          & 62.28                          & 85.84                          & 85.36                          & 66.48                          & 85.92                          & 85.56                          & 64.84                          & 35.14                          & 33.16                          & 35.28                          & 35.62                              \\
		& \textbf{1} & 84.76                          & 85.84                          & 58.04                          & 84.40                          & 85.94                          & 62.62                          & 84.04                          & 85.80                          & 61.02                          & 35.98                          & 35.76                          & 35.88                          & 36.22                              \\
		& \textbf{2} & 81.02                          & 79.78                          & 85.48                          & 81.76                          & 81.50                          & 85.72                          & 81.52                          & 80.80                          & 85.40                          & 41.42                          & 42.70                          & 41.08                          & 43.42                             \\
		\bottomrule
	\end{tabular}
\caption{Multi-task using logits}\label{tab:multi-use-logits-full}
\end{table*}

% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% Please add the following required packages to your document preamble:
% \usepackage{multirow}
\begin{table*}[ht]
	\centering
	\fontsize{8}{12}
	\selectfont
	\begin{tabular}{llccccccccccccc}
		\toprule
		&            & \multicolumn{3}{c}{\textbf{agnews}}  & \multicolumn{3}{c}{\textbf{yahoo}}   & \multicolumn{3}{c}{\textbf{yelp-full}} & \multicolumn{3}{c}{\textbf{yelp-polarity}} \\
		&            & \textbf{0} & \textbf{1} & \textbf{2} & \textbf{0} & \textbf{1} & \textbf{2} & \textbf{0}  & \textbf{1}  & \textbf{2} & \textbf{0}   & \textbf{1}   & \textbf{2}   & \textbf{0} \\
		\hline
		\multirow{3}{*}{\textbf{agnews}}        & \textbf{0} & 93.72      & 93.58      & 93.00      & 80.18      & 82.94      & 81.54      & 64.64       & 66.84       & 63.68      & 58.60        & 69.34        & 64.46        & 59.22      \\
		& \textbf{1} & 93.36      & 93.74      & 90.64      & 81.24      & 83.68      & 82.50      & 66.58       & 67.50       & 66.10      & 72.34        & 65.40        & 72.92        & 67.62      \\
		& \textbf{2} & 92.54      & 90.96      & 93.62      & 81.88      & 81.94      & 81.38      & 61.34       & 63.46       & 55.80      & 53.62        & 64.16        & 64.14        & 59.66      \\
		\hline
		\multirow{3}{*}{\textbf{yahoo}}         & \textbf{0} & 58.06      & 53.86      & 55.52      & 75.08      & 74.98      & 74.72      & 37.94       & 39.66       & 39.30      & 34.14        & 42.72        & 40.22        & 25.66      \\
		& \textbf{1} & 57.32      & 54.30      & 53.22      & 74.58      & 74.82      & 74.52      & 43.24       & 45.48       & 45.72      & 37.76        & 46.42        & 43.08        & 32.94      \\
		& \textbf{2} & 56.26      & 49.48      & 55.96      & 73.76      & 72.84      & 74.58      & 30.12       & 33.00       & 34.56      & 26.86        & 33.56        & 33.60        & 18.02      \\
		\hline
		\multirow{3}{*}{\textbf{yelp-full}}     & \textbf{0} & 31.04      & 30.86      & 34.32      & 31.56      & 35.24      & 27.88      & 68.36       & 67.23       & 67.42      & 46.10        & 46.34        & 49.44        & 37.24      \\
		& \textbf{1} & 30.88      & 32.00      & 31.28      & 31.26      & 34.46      & 33.10      & 64.72       & 67.40       & 63.52      & 46.86        & 46.94        & 48.22        & 36.52      \\
		& \textbf{2} & 20.12      & 20.22      & 20.72      & 20.08      & 20.08      & 30.08      & 41.72       & 33.36       & 67.48      & 38.44        & 31.38        & 39.74        & 24.08      \\
		\hline
		\multirow{3}{*}{\textbf{yelp-polarity}} & \textbf{0} & 68.88      & 65.76      & 76.34      & 63.92      & 69.48      & 59.06      & 97.82       & 97.46       & 97.66      & 97.68        & 97.50        & 97.60        & 79.48      \\
		& \textbf{1} & 67.60      & 67.00      & 69.36      & 59.26      & 65.14      & 69.26      & 97.54       & 97.40       & 97.52      & 97.52        & 97.68        & 97.36        & 77.70      \\
		& \textbf{2} & 49.80      & 49.80      & 49.92      & 49.84      & 49.80      & 49.84      & 78.04       & 73.90       & 97.88      & 96.76        & 78.18        & 97.76        & 67.02      \\
		\hline
		\multirow{3}{*}{\textbf{mnli}}          & \textbf{0} & 34.84      & 33.94      & 35.42      & 35.56      & 35.56      & 35.60      & 31.13       & 31.94       & 32.56      & 38.30        & 36.02        & 34.62        & 88.36      \\
		& \textbf{1} & 35.84      & 35.86      & 35.48      & 35.94      & 36.04      & 35.70      & 35.68       & 37.14       & 37.06      & 38.40        & 36.20        & 38.90        & 86.60      \\
		& \textbf{2} & 37.44      & 35.44      & 37.44      & 33.94      & 34.92      & 35.20      & 49.24       & 50.70       & 50.06      & 48.18        & 47.86        & 51.80        & 82.12      \\
		\hline
		\multirow{3}{*}{\textbf{qqp}}           & \textbf{0} & 36.34      & 36.36      & 36.66      & 36.66      & 36.36      & 36.34      & 37.48       & 37.12       & 37.00      & 37.82        & 37.24        & 36.90        & 78.78      \\
		& \textbf{1} & 36.34      & 36.34      & 36.38      & 36.38      & 36.34      & 36.34      & 36.34       & 36.36       & 36.60      & 36.96        & 36.64        & 36.52        & 78.44      \\
		& \textbf{2} & 55.36      & 41.44      & 61.48      & 60.56      & 60.74      & 58.04      & 57.72       & 45.58       & 63.24      & 45.04        & 47.14        & 48.80        & 75.60      \\
		\bottomrule
	\end{tabular}


	\begin{tabular}{llcccccccccc}
		\toprule
		&            & \multicolumn{3}{c}{\textbf{mnli}}    & \multicolumn{3}{c}{\textbf{qqp}}     & \multicolumn{3}{c}{\textbf{all}}     & \multirow{2}{*}{\textbf{unsup}} \\
		&            & \textbf{0} & \textbf{1} & \textbf{2} & \textbf{0} & \textbf{1} & \textbf{2} & \textbf{0} & \textbf{1} & \textbf{2} &        	\\
		\hline
		\multirow{3}{*}{\textbf{agnews}}        & \textbf{0} & 59.22      & 52.60      & 52.38      & 58.94      & 63.00      & 65.58      & 93.08      & 92.66      & 93.68      & 65.48                           \\
		& \textbf{1} & 67.62      & 61.60      & 65.62      & 73.98      & 67.20      & 78.32      & 93.54      & 92.28      & 92.78      & 74.72                           \\
		& \textbf{2} & 59.66      & 49.24      & 51.90      & 62.24      & 52.64      & 65.46      & 90.22      & 93.58      & 92.34      & 59.76                           \\
		\hline
		\multirow{3}{*}{\textbf{yahoo}}         & \textbf{0} & 25.66      & 18.56      & 16.58      & 29.74      & 30.20      & 41.44      & 74.66      & 74.30      & 74.86      & 42.22                           \\
		& \textbf{1} & 32.94      & 25.66      & 23.80      & 41.48      & 32.30      & 40.96      & 75.44      & 74.18      & 74.54      & 51.26                           \\
		& \textbf{2} & 18.02      & 14.54      & 21.76      & 29.82      & 18.96      & 40.08      & 67.82      & 74.58      & 73.32      & 36.02                           \\
		\hline
		\multirow{3}{*}{\textbf{yelp-full}}     & \textbf{0} & 37.24      & 41.28      & 41.74      & 39.50      & 47.08      & 30.02      & 68.36      & 67.80      & 67.94      & 40.08                           \\
		& \textbf{1} & 36.52      & 37.02      & 38.88      & 42.04      & 47.12      & 32.78      & 68.82      & 66.00      & 65.40      & 40.34                           \\
		& \textbf{2} & 24.08      & 25.44      & 28.08      & 27.50      & 20.60      & 20.08      & 64.98      & 68.62      & 65.36      & 20.08                           \\
		\hline
		\multirow{3}{*}{\textbf{yelp-polarity}} & \textbf{0} & 79.48      & 79.46      & 82.52      & 88.98      & 92.44      & 66.38      & 97.64      & 97.74      & 98.04      & 80.24                           \\
		& \textbf{1} & 77.70      & 70.56      & 82.74      & 83.48      & 87.78      & 69.58      & 97.92      & 97.20      & 97.50      & 71.78                           \\
		& \textbf{2} & 67.02      & 73.06      & 76.24      & 75.26      & 52.26      & 49.80      & 97.46      & 97.90      & 97.10      & 49.86                           \\
		\hline
		\multirow{3}{*}{\textbf{mnli}}          & \textbf{0} & 88.36      & 87.40      & 61.46      & 52.06      & 50.64      & 48.40      & 88.08      & 60.12      & 88.52      & 35.62                           \\
		& \textbf{1} & 86.60      & 88.36      & 57.02      & 51.36      & 49.74      & 41.14      & 88.06      & 57.16      & 87.94      & 36.22                           \\
		& \textbf{2} & 82.12      & 77.06      & 88.48      & 32.66      & 32.70      & 53.62      & 81.78      & 88.20      & 81.54      & 43.42                           \\
		\hline
		\multirow{3}{*}{\textbf{qqp}}           & \textbf{0} & 78.78      & 76.80      & 36.46      & 85.94      & 85.38      & 61.06      & 85.92      & 36.34      & 85.60      & 54.74                           \\
		& \textbf{1} & 78.44      & 77.38      & 36.34      & 85.80      & 85.64      & 54.86      & 85.70      & 36.34      & 85.44      & 36.68                           \\
		& \textbf{2} & 75.60      & 71.58      & 77.64      & 63.66      & 63.64      & 86.26      & 85.00      & 86.16      & 82.44      & 40.20                          \\
		\bottomrule
	\end{tabular}
\end{table*}

\section{Appendices}
\label{sec:appendix}

\end{document}
